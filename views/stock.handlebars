

<div class="stock-container">
    <section class="stock-header">
        <h1>{{companyName}} ({{tickerSymbol}})</h1>
        <p class="company-summary">{{companySummary}}</p>
    </section>

    <section class="stock-content">

        {{!-- <div class="stock-chart-container">
            <h2>Price Chart</h2>
            <!-- Chart will be rendered here dynamically -->
            <canvas id="stockChart" width="800" height="400"></canvas>
        </div> --}}
        {{#if graphTrue}}
        <div class="chartArea">
            <h2>Price Chart</h2>
            <div id="portfolio-chart"></div>
        </div>
        {{/if}}

        <div id="tickerSymbol" hidden> {{tickerSymbol}} </div>
        <div id="chartLabels" data-value="{{chartLabels}}" hidden></div>
        <div id="chartPrices" data-value="{{chartPrices}}" hidden></div>

        <div class="stock-details">
            <h2>Stock Details</h2>
            <div class="stock-metrics">
                <div class="metric-group">
                    <div class="metric">
                        <span class="metric-label">Current Price:</span>
                        <span class="metric-value">{{currentPrice}}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Today's Change:</span>
                        <span class="metric-value {{#if isPositive}}positive{{else}}negative{{/if}}">
                            {{priceChange}} ({{percentChange}})
                        </span>
                    </div>
                </div>

                <div class="metric-group">
                    <div class="metric">
                        <span class="metric-label">Open Price:</span>
                        <span class="metric-value">{{openPrice}}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Previous Close:</span>
                        <span class="metric-value">{{previousClose}}</span>
                    </div>
                </div>

                <div class="metric-group">
                    <div class="metric">
                        <span class="metric-label">Day's High:</span>
                        <span class="metric-value">{{dayHigh}}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Day's Low:</span>
                        <span class="metric-value">{{dayLow}}</span>
                    </div>
                </div>

                <div class="metric-group">
                    <div class="metric">
                        <span class="metric-label">Volume:</span>
                        <span class="metric-value">{{volume}}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Market Cap:</span>
                        <span class="metric-value">{{marketCap}} ({{marketCapAbbrev}})</span>
                    </div>
                </div>
            </div>

            {{#if isLoggedIn}}
            <div class="stock-actions">
                <form method="POST" action="/stock/{{tickerSymbol}}/buy" class="trade-form">
                    <h3>Buy Shares</h3>
                    <div class="form-group">
                        <label for="buyQuantity">Quantity:</label>
                        <input type="number" id="buyQuantity" name="quantity" min="1" required>
                    </div>
                    <button type="submit" class="buy-btn">Buy</button>
                </form>

                <form method="POST" action="/stock/{{tickerSymbol}}/sell" class="trade-form">
                    <h3>Sell Shares</h3>
                    <div class="form-group">
                        <label for="sellQuantity">Quantity:</label>
                        <input type="number" id="sellQuantity" name="quantity" min="1" required>
                    </div>
                    <button type="submit" class="sell-btn">Sell</button>
                </form>
            </div>
            {{/if}}
        </div>
    </section>
</div>